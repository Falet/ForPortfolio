# EnemySystem

Основная концепция: Система врагов, в которой поведение врагов меняется с помощью машины состояний. Внутри состояний реализованы поведения.

Класс EnemyStateController контролирует какое состояние включить.

AlarmState - вызвается когда происходит тревога. Выполняет поведения последовательно.

AttackState - вызывается когда происходит атака. Может выполнять поведение последовательно и параллельно.

PatrolState - вызывается когда происходит патрулирование. Выполняет последовательно поведение. Может выполнять поведения частично или полно.

IBehaviourEnemyPatrol, IBehaviourEnemyAttack, IBehaviourAlarmEnemy - интерфейсы для поведения.

У каждого состояния есть инициализатор, который собирает все поведения на это состояние. Так же у состяний есть дата классы, в которых передаются сами поведения плюс настройки для их правильной обработки.

AlarmState:
BehaviourMovementToAlarm - перемещает с помощью расчета пути объект на точку тревоги.

AttackState:
BehaviourAlarmAttack - вызывает тревогу.
BehaviourAttack - атакует врага.
BehaviourAttackWithProjectile - атака врага с помощью снаряда.
BehaviourMovementAtAlarm - движение на врага во время вызова тревоги, если нужно пойти на врага находясь в состоянии атаки(было применимо когда орел должен был кружиться над персонажем, вызывая тревогу)

PatrolState:
BehaviourMoveFieldOfView - Двигает обзор объекта.
BehaviourMovement - перемещает объект по пути.
BehaviourMovementToPath - Перемещает объект на точку с помощью расчета пути. Поведение требуется чтобы вернуть объект без поведение BehaviourMovement на исходную точку.
BehaviourRecurrentCheck - поведение когда нужно, чтобы обзор объект исчезал.
BehaviourRotation - вращает объект по заданным градусам.

В данном проекте реализованы поведения для примера. Возможно требуют переосмысления к подходу их написанию. Например, делать поведение не отдельным классом, который выполняет цельную логику, а пытаться разбить его на составные части и из них собирать поведение. Так же я пока не доделал как поведения должны правильно взаимодействовать с анимациями. Но для этого в проекте присутвует логика для получения данных об анимации(например для того чтобы узнать и отреагировать, когда анимация закончилась, применил в BehaviourRecurrentCheck)

